<div ng-class="{ 'selected': $ctrl.isSelected }">
  <!-- TODO: move to component -->
  <div class="tx-summary">
    <a href="" class="content" ng-click="$ctrl.selectOnClick()" ng-class="{ 'no-pointer': $ctrl.historical }">
      <div class="icon">
        <i class="fa {{$ctrl.icon()}} fa-2x" aria-hidden="true"></i>
      </div>
      <div class="caption">
        <div class="title">
          <span>{{::$ctrl.title()}}</span>
        </div>
        <div class="subtitle">
          <span>{{::$ctrl.subtitle()}}</span>
        </div>
      </div>
      <div class="warning" ng-if="$ctrl.hasMatches()" ng-class="{ 'hide': $ctrl.isSelected }">
        <div>
          <i class="fa fa-exclamation-triangle fa-lg" aria-hidden="true"></i>
          <span>This record may be a duplicate</span>
        </div>
      </div>
    </a>
    <div class="actions" ng-class="{ 'hide': $ctrl.isSelected }" ng-if="!$ctrl.historical">
      <div type="button" class="transac-icon transac-fab action deny" ng-click="$ctrl.denyOnClick()" uib-tooltip="Deny only this time" tooltip-popup-delay="300">
        <i class="fa fa-times fa-2x fa-fw"></i>
      </div>
      <div type="button" class="transac-icon transac-fab action approve" ng-click="$ctrl.approveOnClick(true)" uib-tooltip="Always share this record" tooltip-popup-delay="300">
        <i class="fa fa-check fa-2x fa-fw"></i>
      </div>
      <!-- <div type="button" class="transac-icon transac-fab action merge" ng-if="$ctrl.isActionMade('merge')">
        <i class="fa fa-link fa-2x fa-fw"></i>
      </div> -->
    </div>
  </div>
  <div class="tx-detail" ng-if="$ctrl.isSelected">
    <div class="row is-flex">
      <div class="col-md-8 col-xs-12 no-gutters">
        <transac-tx-changes changes="$ctrl.formattedChanges"></transac-tx-changes>
      </div>
      <div class="col-md-4 col-xs-12 no-gutters">
        <div class="row apps no-gutters">
          <div class="title">
            <h5>Select apps to share with:</h5>
          </div>
          <div class="app" ng-repeat="mapping in ::$ctrl.getPendingMappings()" ng-click="$ctrl.selectAppOnClick($event, mapping)">
            <span>{{::mapping.app_name}}</span>
            <input type="checkbox" ng-checked="mapping.sharedWith">
          </div>
        </div>
      </div>
    </div>
    <div class="row" ng-if="$ctrl.canReconcileRecords() && !$ctrl.historical">
      <div class="col-md-12 col-xs-12">
        <div class="row dup-line-break">
          <div class="spacer left"></div>
          <div class="title">
            <div>
              <i class="fa fa-exclamation fa-lg" aria-hidden="true"></i>
              <span>Potential Duplicates</span>
            </div>
          </div>
          <div class="spacer right"></div>
        </div>
        <div class="row">
          <div class="col-md-12 col-xs-12 matches">
            <transac-tx-matches matches="::$ctrl.matches"></transac-tx-matches>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 col-xs-12 no-gutters actions-bar">
        <div class="wrapper">
          <div type="button" class="transac-icon transac-fab action dups" ng-if="$ctrl.canReconcileRecords()" ng-click="$ctrl.reconcileOnClick()" uib-tooltip="Merge duplicate records" tooltip-popup-delay="300">
            <i class="fa fa-link fa-2x fa-fw"></i>
          </div>
          <div type="button" class="transac-icon transac-fab action deny" ng-click="$ctrl.denyOnClick(true)" uib-tooltip="Never share this record" tooltip-popup-delay="300">
            <i class="fa fa-times fa-2x first"/><i class="fa fa-times fa-2x second"/>
          </div>
          <div type="button" class="transac-icon transac-fab action approve-once" ng-click="$ctrl.approveOnClick()" uib-tooltip="Approve only this time" tooltip-popup-delay="300">
            <i class="fa fa-check fa-2x"></i><span>x1</span>
          </div>
          <div type="button" class="transac-icon transac-fab action deny-once" ng-click="$ctrl.denyOnClick()" uib-tooltip="Deny only this time" tooltip-popup-delay="300">
            <i class="fa fa-times fa-2x fa-fw"></i>
          </div>
          <div type="button" class="transac-icon transac-fab action approve" ng-click="$ctrl.approveOnClick(true)" uib-tooltip="Always share this record" tooltip-popup-delay="300">
            <i class="fa fa-check fa-2x fa-fw"></i>
          </div>
        </div>
        <!-- Button style actions, kept incase we want to go back to this. -->
        <!-- <div class="wrapper">
          <div type="button" class="transac-btn transac-raised action approve" ng-click="$ctrl.approveOnClick(true)" uib-tooltip="Always share this record" tooltip-popup-delay="300">
            <span>Always share</span>
            <i class="fa fa-check fa-fw"></i>
          </div>
          <div type="button" class="transac-btn transac-raised action deny-once" ng-click="$ctrl.denyOnClick()" uib-tooltip="Deny only this time" tooltip-popup-delay="300">
            <span>Do not share</span>
            <i class="fa fa-times fa-2x fa-fw"></i>
          </div>
          <div type="button" class="transac-btn transac-raised action approve-once" ng-click="$ctrl.approveOnClick()" uib-tooltip="Approve only this time" tooltip-popup-delay="300">
            <span>Share once</span>
            <i class="fa fa-check fa-2x"></i><span class="icon-text">x1</span>
          </div>
          <div type="button" class="transac-btn transac-raised action deny" ng-click="$ctrl.denyOnClick(true)" uib-tooltip="Never share this record" tooltip-popup-delay="300">
            <span>Never share</span>
            <i class="fa fa-times fa-2x first"/><i class="fa fa-times fa-2x second"/>
          </div>
          <div type="button" class="transac-btn transac-raised action dups" ng-if="$ctrl.hasMatches()" ng-click="$ctrl.reconcileOnClick()" uib-tooltip="Merge duplicate records" tooltip-popup-delay="300">
            <span>Merge Duplicates</span>
            <i class="fa fa-link fa-2x fa-fw"></i>
          </div>
        </div> -->

      </div>
  </div>
</div>
