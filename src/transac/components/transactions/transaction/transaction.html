<div ng-class="{ 'selected': $ctrl.isSelected }">
  <div class="summary">
    <a href="" class="summary_content" ng-click="$ctrl.selectOnClick()">
      <div class="summary_content_icon">
        <i class="fa {{$ctrl.icon()}} fa-2x" aria-hidden="true"></i>
      </div>
      <div class="summary_content_caption">
        <div class="summary_content_caption_title">
          <span>{{::$ctrl.title()}}</span>
        </div>
        <div class="summary_content_caption_subtitle">
          <span>{{::$ctrl.subtitle()}}</span>
        </div>
      </div>
      <div class="summary_content_warning" ng-if="$ctrl.hasMatches()">
        <div>
          <i class="fa fa-exclamation-triangle fa-lg" aria-hidden="true"></i>
          <span>This record may be a duplicate</span>
        </div>
      </div>
      <div class="summary_actions">
        <button type="button" class="summary_actions_action--deny" ng-click="$ctrl.denyOnClick()">
          <i class="fa fa-times fa-2x"></i>
        </button>
        <button type="button" class="summary_actions_action--approve" ng-click="$ctrl.approveOnClick(true)">
          <i class="fa fa-check fa-2x"></i>
        </button>
      </div>
    </a>
  </div>
  <div class="detail" ng-if="$ctrl.isSelected">
    <div class="row">
      <div class="col-md-6 detail_section no-gutters">
        <transac-tx-changes changes="$ctrl.formattedChanges"></transac-tx-changes>
      </div>
      <div class="col-md-3 detail_section no-gutters">
        <div class="detail_section_title">
          <h5>Select apps to share with:</h5>
        </div>
        <div class="detail_section_app" ng-repeat="mapping in ::$ctrl.transaction.mappings" ng-click="$ctrl.selectAppOnClick($event, mapping)">
          <span>{{::mapping.app_name}}</span>
          <input type="checkbox" ng-checked="mapping.sharedWith">
        </div>
      </div>
      <div class="col-md-3 detail_section no-gutters">
        <div class="detail_section_action">
          <div class="detail_section_action_approve" ng-click="$ctrl.approveOnClick()">
            <span class="action-label">Approve only this time</span>
            <div class="action-button"><i class="fa fa-check fa-2x"></i></div>
          </div>
        </div>
        <div class="detail_section_action">
          <div class="detail_section_action_deny" ng-click="$ctrl.denyOnClick(true)">
            <span class="action-label">Never share this record</span>
            <div class="action-button"><i class="fa fa-ban fa-2x"></i></div>
          </div>
        </div>
        <div class="detail_section_action" ng-if="$ctrl.hasMatches()">
          <div class="detail_section_action_duplicate" ng-click="$ctrl.reconcileOnClick()">
            <span class="action-label">This record is a duplicate</span>
            <div class="action-button"><i class="fa fa-link fa-2x"></i></div>
          </div>
        </div>
      </div>
    </div>
    <div ng-if="$ctrl.hasMatches()">
      <div class="row detail_dup-line-break">
        <div class="detail_dup-line-break_spacer detail_dup-line-break_spacer--left"></div>
        <div class="detail_dup-line-break_title">
          <div>
            <i class="fa fa-exclamation fa-lg" aria-hidden="true"></i>
            <span>Potential Duplicates</span>
          </div>
        </div>
        <div class="detail_dup-line-break_spacer detail_dup-line-break_spacer--right"></div>
      </div>
      <div class="row">
        <div class="col-md-12 col-xs-12 detail_section detail_section_matches">
          <transac-tx-matches matches="::$ctrl.matches"></transac-tx-matches>
        </div>
      </div>
    </div>
  </div>
</div>
